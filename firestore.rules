rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    function isAdmin() {
      return request.auth != null
        && request.auth.token.email in [
          "yair.tenorio.silva@gmail.com",
          "harujagdl@gmail.com",
          "harujagdl.ventas@gmail.com"
        ];
    }

    // âœ… PÃºblico: listado sin datos sensibles
    match /HarujaPrendas_2025_public/{docId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    // ðŸ”’ Privado: datos reales (solo admin)
    match /HarujaPrendas_2025/{docId} {
      allow read, write: if isAdmin();
    }

    // âœ… Diccionarios (si existen como colecciones exactas)
    match /diccionario_colores/{docId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    match /diccionario_tallas/{docId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    match /diccionario_tipos/{docId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    match /diccionario_proveedores/{docId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    // âœ… counters
    match /counters/{docId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    // ðŸš« Default deny (siempre al final)
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
